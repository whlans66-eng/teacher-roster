# =====================================================
# Microsoft Fabric Warehouse/Lakehouse 環境變數範本
# =====================================================
# 使用說明：
# 1. 複製此檔案為 .env
# 2. 填入您的 Fabric Workspace 資訊
# 3. 選擇合適的驗證方式
# =====================================================

# =====================================================
# 應用程式設定
# =====================================================
NODE_ENV=production
PORT=3001

# =====================================================
# Fabric Warehouse/Lakehouse 連線設定
# =====================================================

# Fabric SQL Endpoint（必填）
# 格式：<workspace-id>.datawarehouse.fabric.microsoft.com
# 或：<workspace-id>.lakehouse.fabric.microsoft.com
FABRIC_SERVER=your-workspace.datawarehouse.fabric.microsoft.com

# 資料庫名稱（Warehouse 或 Lakehouse 名稱）
FABRIC_DATABASE=teacher_roster_warehouse

# =====================================================
# 驗證方式（選擇一種）
# =====================================================

# 方式 1: Azure Active Directory 預設認證（推薦用於 Azure 部署）
# 使用 Managed Identity 或 Azure CLI 認證
FABRIC_AUTH_TYPE=azure-active-directory-default

# 方式 2: Service Principal（用於 CI/CD 或非 Azure 環境）
# FABRIC_AUTH_TYPE=azure-active-directory-service-principal-secret
# FABRIC_CLIENT_ID=your-service-principal-client-id
# FABRIC_CLIENT_SECRET=your-service-principal-secret
# FABRIC_TENANT_ID=your-azure-tenant-id

# 方式 3: Azure AD 互動式登入（僅用於本地開發）
# FABRIC_AUTH_TYPE=azure-active-directory-interactive

# =====================================================
# JWT 認證設定
# =====================================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d

# =====================================================
# Session 設定
# =====================================================
SESSION_SECRET=your-session-secret-key-change-this

# =====================================================
# CORS 設定
# =====================================================
# 允許的前端網域（生產環境）
CORS_ORIGIN=https://your-frontend-domain.azurestaticapps.net

# 開發環境可以使用 *（不建議用於生產）
# CORS_ORIGIN=*

# =====================================================
# 檔案上傳設定
# =====================================================
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=10485760

# =====================================================
# 日誌設定
# =====================================================
LOG_LEVEL=info
LOG_DIR=/app/logs

# =====================================================
# Azure 監控設定（選用）
# =====================================================
# Application Insights 連線字串
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=xxx;...

# =====================================================
# 說明
# =====================================================
# 1. Fabric Warehouse vs Lakehouse:
#    - Warehouse: 純 SQL，效能好，適合結構化資料
#    - Lakehouse: 支援 Delta Lake，可存非結構化資料
#
# 2. 驗證方式建議:
#    - Azure Container Apps: 使用 Managed Identity (azure-active-directory-default)
#    - 本地開發: 使用 Azure CLI (azure-active-directory-default)
#    - CI/CD: 使用 Service Principal
#
# 3. 如何取得 Fabric SQL Endpoint:
#    - 登入 Fabric Portal (https://fabric.microsoft.com)
#    - 進入您的 Workspace
#    - 選擇 Warehouse 或 Lakehouse
#    - 點擊「設定」→「SQL 連線字串」
#
# 4. 權限需求:
#    - Warehouse: 需要 Warehouse Viewer 或更高權限
#    - Lakehouse: 需要 Lakehouse Viewer 或更高權限
# =====================================================
