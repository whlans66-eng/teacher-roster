# RBAC 方案比較

## 📊 快速比較

| 項目 | 方案 A：簡化版 | 方案 B：企業版 |
|------|---------------|---------------|
| **架構** | GitHub Pages + Google Apps Script | Docker + Node.js + MySQL |
| **認證方式** | Google Sheets 儲存帳密 | Azure AD SSO (Outlook 帳號) |
| **實施時間** | 3-4 小時 ⚡ | 2-3 週 |
| **技術難度** | ⭐ 簡單 | ⭐⭐⭐⭐ 複雜 |
| **成本** | 💰 免費 | 💰💰 需要伺服器 |
| **適用規模** | < 1000 用戶 | 任意規模 |
| **維護成本** | 低 | 中高 |
| **單一登入** | ❌ | ✅ |
| **角色自動分配** | ❌ 手動 | ✅ 根據部門 |
| **安全性** | 基本 | 企業級 |
| **文檔** | [查看](RBAC-GOOGLE-APPS-SCRIPT.md) | [查看](AZURE-AD-INTEGRATION.md) |

---

## 🎯 方案 A：簡化版（推薦）

### 適合誰？
- ✅ 想快速上線的小型團隊
- ✅ 不需要 Azure AD 單一登入
- ✅ 用戶少於 1000 人
- ✅ 預算有限
- ✅ 維持現有架構（GitHub Pages + Google Apps Script）

### 優點
- 🚀 **快速**：3-4 小時完成
- 💰 **免費**：無伺服器成本
- 🔧 **簡單**：基於現有架構，無需學習新技術
- 📦 **零維運**：Google 負責基礎設施

### 缺點
- ⚠️ 密碼儲存在 Google Sheets（SHA-256 雜湊）
- ⚠️ 無單一登入（SSO）
- ⚠️ 角色需手動分配
- ⚠️ 擴展性有限

### 架構圖
```
前端 (GitHub Pages)
    ↓ HTTPS
Google Apps Script
    ↓
Google Sheets (users + sessions 表)
```

### 立即開始
👉 [查看完整文檔](RBAC-GOOGLE-APPS-SCRIPT.md)

---

## 🏢 方案 B：企業版

### 適合誰？
- ✅ 公司已使用 Microsoft 365
- ✅ 需要 Outlook 帳號單一登入
- ✅ 需要根據部門自動分配角色
- ✅ 預算充足
- ✅ 有技術團隊支援

### 優點
- 🔐 **安全**：Azure AD 企業級認證
- 🎫 **單一登入**：使用 Outlook 帳號
- 🤖 **自動化**：根據部門自動分配角色
- 📈 **可擴展**：支援任意規模
- 🔍 **審計**：完整的操作日誌

### 缺點
- ⏳ 實施時間長（2-3 週）
- 💰 需要伺服器成本
- 🔧 技術複雜度高
- 🛠️ 需要維護 Docker、資料庫

### 架構圖
```
前端 (GitHub Pages)
    ↓ HTTPS
Node.js + Express (Docker)
    ↓ OAuth 2.0
Azure AD (Microsoft Entra ID)
    ↓
MySQL 資料庫
```

### 立即開始
👉 [查看完整文檔](AZURE-AD-INTEGRATION.md)

---

## 🤔 如何選擇？

### 選擇方案 A（簡化版）如果：
- [ ] 您的團隊少於 100 人
- [ ] 不需要連動公司 Azure 帳號
- [ ] 想在今天內完成實作
- [ ] 預算有限
- [ ] 技術團隊有限

### 選擇方案 B（企業版）如果：
- [ ] 公司已使用 Microsoft 365 / Outlook
- [ ] 需要員工使用公司帳號登入
- [ ] 需要根據部門自動分配角色
- [ ] 有專業的技術團隊
- [ ] 需要企業級安全性

---

## 📝 功能對照表

| 功能 | 方案 A | 方案 B |
|------|:------:|:------:|
| **認證與授權** |
| 用戶登入 | ✅ 帳密 | ✅ Azure AD SSO |
| 訪客訪問 | ✅ | ✅ |
| 角色分配 | ❌ 手動 | ✅ 自動 |
| 密碼重設 | ❌ 手動 | ✅ Microsoft 重設 |
| 多重驗證 (MFA) | ❌ | ✅ Azure AD MFA |
| 單一登入 (SSO) | ❌ | ✅ |
| **權限控制** |
| 角色基礎權限 | ✅ | ✅ |
| 訪客只看基本資訊 | ✅ | ✅ |
| 學員查看完整資料 | ✅ | ✅ |
| 教師編輯自己資料 | ✅ | ✅ |
| 管理者完整權限 | ✅ | ✅ |
| **資料安全** |
| HTTPS 傳輸 | ✅ | ✅ |
| 密碼加密 | ✅ SHA-256 | ✅ bcrypt |
| Token 過期 | ✅ 24 小時 | ✅ 可設定 |
| 審計日誌 | ❌ | ✅ |
| **擴展性** |
| 用戶數上限 | ~1000 | 無限制 |
| 同時在線用戶 | ~100 | 無限制 |
| 資料備份 | Google 自動 | 需自行設定 |
| **維運** |
| 伺服器維護 | ❌ 不需要 | ✅ 需要 |
| 資料庫維護 | ❌ 不需要 | ✅ 需要 |
| 成本 | 免費 | 伺服器費用 |

---

## 🔄 遷移路徑

### 從方案 A 升級到方案 B

如果您先使用方案 A，之後想升級到方案 B：

1. **資料遷移**
   - Google Sheets → MySQL
   - 用戶帳號可保留（需重新建立 Azure AD 帳號）

2. **時程**
   - 方案 A 實作：3-4 小時
   - 升級到方案 B：2 週
   - 資料遷移：1 天

3. **風險**
   - ⚠️ 用戶需要重新設定 Azure AD 帳號
   - ⚠️ 可能需要停機維護

**建議**：如果未來可能需要 Azure AD，建議直接使用方案 B。

---

## 💡 實際案例建議

### 案例 1：海事學校（50 名教師，500 名學員）
**建議**：方案 A
- 規模適中，Google Sheets 可應付
- 快速上線，節省成本
- 教師手動建立帳號可接受

### 案例 2：大型企業培訓中心（200+ 員工）
**建議**：方案 B
- 已使用 Microsoft 365
- 需要員工用公司帳號登入
- 部門多，需要自動角色分配

### 案例 3：新創公司（快速驗證概念）
**建議**：方案 A → 未來升級方案 B
- 先用方案 A 快速驗證
- 如果成功，再升級到方案 B

---

## 📚 相關文檔

- [方案 A 完整文檔](RBAC-GOOGLE-APPS-SCRIPT.md)
- [方案 B 完整文檔](AZURE-AD-INTEGRATION.md)
- [方案 B 架構圖](AZURE-AD-ARCHITECTURE.md)
- [RBAC 基礎規劃](RBAC-PLANNING.md)
- [範例程式碼](examples/)

---

## ❓ 常見問題

### Q: 我應該選哪個方案？
**A**: 如果您不確定，先選方案 A。3-4 小時就能完成，未來還可以升級。

### Q: 方案 A 的安全性如何？
**A**: 基本安全（SHA-256 + HTTPS），適合內部系統。如需企業級安全，選方案 B。

### Q: 可以混用兩個方案嗎？
**A**: 不建議。選擇一個方案並完整實作。

### Q: 方案 B 需要多少伺服器成本？
**A**: 小型部署約 $10-20/月（VPS），大型部署需評估。

### Q: 我的公司沒有 Microsoft 365，可以用方案 B 嗎？
**A**: 可以，但需要購買 Azure AD 授權。如果沒有 Microsoft 365，建議用方案 A 或考慮其他 SSO 方案。

---

## 📞 需要協助？

- 📖 查看完整文檔
- 💬 建立 Issue 討論
- 📧 聯絡開發團隊

選擇適合您的方案，開始實作吧！🚀
