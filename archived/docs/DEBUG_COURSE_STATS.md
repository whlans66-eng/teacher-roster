# æ´¾èª²çµ±è¨ˆå•é¡Œèª¿è©¦æŒ‡å—

## ğŸš¨ å•é¡Œæè¿°

ä½ åæ‡‰ï¼š**èª²ç¨‹é¡å‹åˆ†ä½ˆã€ä»Šæ—¥èª²ç¨‹ç¸½è¦½æ²’æœ‰è·Ÿè‘—æ—¥æœŸæ›´å‹•ï¼Œé€£ä¸Šå¾Œç«¯å°±å¤±æ•—äº†**

æˆ‘å·²ç¶“æ·»åŠ äº†å¤§é‡çš„èª¿è©¦å·¥å…·ä¾†å¹«åŠ©æ‰¾å‡ºå•é¡Œã€‚è«‹æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ“ä½œã€‚

---

## ğŸ“‹ èª¿è©¦æ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šæ‰“é–‹é–‹ç™¼è€…å·¥å…·

1. æŒ‰ **F12** æ‰“é–‹é–‹ç™¼è€…å·¥å…·
2. åˆ‡æ›åˆ° **Console** æ¨™ç±¤
3. æº–å‚™æŸ¥çœ‹æ‰€æœ‰æ—¥èªŒè¼¸å‡º

---

### æ­¥é©Ÿ 2ï¼šé‡æ–°æ•´ç†é é¢

é‡æ–°æ•´ç†é é¢ä¸¦è§€å¯Ÿ Console è¼¸å‡ºã€‚

#### âœ… æ­£å¸¸æƒ…æ³æ‡‰è©²çœ‹åˆ°ï¼š

```
âœ… å¾Œç«¯é€£ç·šæˆåŠŸ
âœ… æ´¾èª²æ•¸æ“šå·²å¾å¾Œç«¯è¼‰å…¥ï¼Œå…± X ç­†
âœ… æ´¾èª²æ•¸æ“šå·²åŒæ­¥åˆ°è¡Œäº‹æ›†ï¼Œå…± X ç­†
```

#### âŒ å¦‚æœçœ‹åˆ°ä»¥ä¸‹ä»»ä¸€æƒ…æ³ï¼š

```
âš ï¸ ç„¡æ³•å¾å¾Œç«¯è¼‰å…¥æ´¾èª²æ•¸æ“š
```
æˆ–è€…
```
ğŸ“ å¾Œç«¯æ´¾èª²æ•¸æ“šç‚ºç©º
```

**é€™è¡¨ç¤ºæ•¸æ“šæ²’æœ‰æ­£ç¢ºè¼‰å…¥ï¼**

---

### æ­¥é©Ÿ 3ï¼šé‹è¡Œè¨ºæ–·å·¥å…·

åœ¨ Console ä¸­åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```javascript
diagnoseCourseManagement()
```

é€™æœƒç”Ÿæˆå®Œæ•´çš„è¨ºæ–·å ±å‘Šã€‚

#### è¨ºæ–·å ±å‘Šç¯„ä¾‹ï¼ˆæ­£å¸¸æƒ…æ³ï¼‰ï¼š

```
ğŸ”§ === æ´¾èª²ç®¡ç†è¨ºæ–·å ±å‘Š ===

ğŸ“Š åŸºæœ¬ç‹€æ…‹ï¼š
  - courseAssignments ç¸½æ•¸: 15
  - ç•¶å‰é¸æ“‡å¸«è³‡ID: null
  - æ—¥æœŸç¯„åœ: 2025-11-01 ~ 2025-11-30
  - å¸«è³‡ç¸½æ•¸: 5

âœ… courseAssignments æœ‰æ•¸æ“š
å‰ 3 ç­†æ•¸æ“š: [...]

ğŸ“ˆ å„å¸«è³‡èª²ç¨‹æ•¸é‡: { 101: 5, 102: 3, 103: 7 }

ğŸ“… æ—¥æœŸç¯„åœ: 2025-11-01 ~ 2025-11-30

âš ï¸ å°šæœªé¸æ“‡å¸«è³‡

ğŸ’¡ å»ºè­°ï¼š
  - æ‰‹å‹•é‡æ–°è¼‰å…¥æ•¸æ“š: await loadCourseAssignmentsFromBackend()
  - æ‰‹å‹•æ›´æ–°è¦–åœ–: updateCourseView()
```

#### è¨ºæ–·å ±å‘Šç¯„ä¾‹ï¼ˆæœ‰å•é¡Œï¼‰ï¼š

```
ğŸ”§ === æ´¾èª²ç®¡ç†è¨ºæ–·å ±å‘Š ===

ğŸ“Š åŸºæœ¬ç‹€æ…‹ï¼š
  - courseAssignments ç¸½æ•¸: 0  â† âŒ é€™æ˜¯å•é¡Œï¼
  - ç•¶å‰é¸æ“‡å¸«è³‡ID: null
  - æ—¥æœŸç¯„åœ: 2025-11-01 ~ 2025-11-30
  - å¸«è³‡ç¸½æ•¸: 5

âš ï¸ courseAssignments æ˜¯ç©ºçš„ï¼
å˜—è©¦å¾ localStorage è®€å–...
localStorage ä¸­æœ‰ 15 ç­†æ•¸æ“š
æ•¸æ“šæ¨£æœ¬: [...]

ğŸ’¡ å»ºè­°ï¼š
  1. æª¢æŸ¥å¾Œç«¯ API æ˜¯å¦æ­£å¸¸
  2. æª¢æŸ¥ Google Sheets æ˜¯å¦æœ‰æ•¸æ“š
  3. å˜—è©¦æ‰‹å‹•æ–°å¢ä¸€ç­†æ´¾èª²æ¸¬è©¦
```

---

### æ­¥é©Ÿ 4ï¼šæª¢æŸ¥æ•¸æ“šè¼‰å…¥

å¦‚æœè¨ºæ–·é¡¯ç¤º `courseAssignments ç¸½æ•¸: 0`ï¼Œè«‹åŸ·è¡Œï¼š

```javascript
// æª¢æŸ¥ localStorage
console.log('localStorage æ•¸æ“š:', JSON.parse(localStorage.getItem('courseAssignments')));

// æ‰‹å‹•é‡æ–°è¼‰å…¥
await loadCourseAssignmentsFromBackend();

// å†æ¬¡è¨ºæ–·
diagnoseCourseManagement();
```

---

### æ­¥é©Ÿ 5ï¼šé€²å…¥æ´¾èª²ç®¡ç†é é¢

é»é¸ã€Œæ´¾èª²ç®¡ç†ã€ï¼Œè§€å¯Ÿ Console è¼¸å‡ºï¼š

#### âœ… æ­£å¸¸æƒ…æ³ï¼š

```
ğŸ“‹ é¡¯ç¤ºæ´¾èª²ç®¡ç†è¦–åœ–
  - courseAssignments ç¸½æ•¸: 15
  - å¸«è³‡é¸å–®å·²å»ºç«‹ï¼Œå…± 5 ä½å¸«è³‡
  - æ—¥æœŸå·²åˆå§‹åŒ–: 2025-11-01 ~ 2025-11-30
  - å°šæœªé¸æ“‡å¸«è³‡ï¼Œç­‰å¾…ç”¨æˆ¶é¸æ“‡
```

#### âŒ å¦‚æœçœ‹åˆ°ï¼š

```
ğŸ“‹ é¡¯ç¤ºæ´¾èª²ç®¡ç†è¦–åœ–
  - courseAssignments ç¸½æ•¸: 0  â† âŒ å•é¡Œåœ¨é€™è£¡ï¼
```

---

### æ­¥é©Ÿ 6ï¼šé¸æ“‡å¸«è³‡

é¸æ“‡ä¸€ä½å¸«è³‡ï¼Œè§€å¯Ÿ Console è¼¸å‡ºï¼š

#### âœ… æ­£å¸¸æƒ…æ³ï¼š

```
ğŸ”„ æ›´æ–°èª²ç¨‹è¦–åœ– - å¸«è³‡ID: 101
ğŸ“¦ ç•¶å‰ courseAssignments ç¸½æ•¸: 15

ğŸ” é–‹å§‹éæ¿¾èª²ç¨‹
  - å¸«è³‡ID: 101
  - æ—¥æœŸç¯„åœ: 2025-11-01 ~ 2025-11-30
  - courseAssignments ç¸½æ•¸: 15
  - å‰ 3 ç­†æ•¸æ“š: [...]
  âœ… éæ¿¾çµæœ: 5 ç­†èª²ç¨‹

ğŸ” æ›´æ–°çµ±è¨ˆ - å¸«è³‡ID: 101 éæ¿¾å¾Œèª²ç¨‹æ•¸: 5
ğŸ“Š çµ±è¨ˆçµæœ - ç¸½æ™‚æ•¸: 10 ç¸½èª²ç¨‹æ•¸: 5 ...

ğŸ¨ æ¸²æŸ“èª²ç¨‹é¡å‹å¡ç‰‡ - èª²ç¨‹æ•¸: 5
ğŸ“ˆ èª²ç¨‹é¡å‹çµ±è¨ˆ: { æ­£èª²: 3, è£œèª²: 2 }
```

#### âŒ å¦‚æœçœ‹åˆ°ï¼š

```
ğŸ” é–‹å§‹éæ¿¾èª²ç¨‹
  - å¸«è³‡ID: 101
  - courseAssignments ç¸½æ•¸: 0  â† âŒ æ²’æœ‰æ•¸æ“šï¼
  âœ… éæ¿¾çµæœ: 0 ç­†èª²ç¨‹
```

æˆ–è€…ï¼š

```
ğŸ” é–‹å§‹éæ¿¾èª²ç¨‹
  - courseAssignments ç¸½æ•¸: 15
  âœ— èª²ç¨‹ æ•¸å­¸èª² - å¸«è³‡ä¸åŒ¹é… (102 !== 101)
  âœ— èª²ç¨‹ è‹±æ–‡èª² - å¸«è³‡ä¸åŒ¹é… (103 !== 101)
  ...
  âœ… éæ¿¾çµæœ: 0 ç­†èª²ç¨‹  â† âŒ å…¨éƒ¨éæ¿¾æ‰äº†ï¼
```

---

### æ­¥é©Ÿ 7ï¼šæ”¹è®Šæ—¥æœŸç¯„åœ

æ”¹è®Šèµ·å§‹æˆ–çµæŸæ—¥æœŸï¼Œè§€å¯Ÿæ˜¯å¦è§¸ç™¼ï¼š

```
ğŸ”„ æ›´æ–°èª²ç¨‹è¦–åœ– - å¸«è³‡ID: 101
ğŸ“¦ ç•¶å‰ courseAssignments ç¸½æ•¸: 15
ğŸ” é–‹å§‹éæ¿¾èª²ç¨‹
  ...
```

---

## ğŸ” å¸¸è¦‹å•é¡Œå’Œè§£æ±ºæ–¹æ¡ˆ

### å•é¡Œ 1ï¼šcourseAssignments ç¸½æ•¸æ˜¯ 0

**åŸå› **ï¼šæ•¸æ“šæ²’æœ‰å¾å¾Œç«¯è¼‰å…¥

**è§£æ±ºæ–¹æ³•**ï¼š

1. æª¢æŸ¥ API é€£ç·šï¼ˆé»æ“Šã€Œæ¸¬è©¦ API é€£ç·šã€æŒ‰éˆ•ï¼‰
2. æª¢æŸ¥ Google Sheets æ˜¯å¦æœ‰æ´¾èª²æ•¸æ“š
3. æ‰‹å‹•é‡æ–°è¼‰å…¥ï¼š
   ```javascript
   await loadCourseAssignmentsFromBackend()
   ```
4. å¦‚æœå¾Œç«¯æ²’æ•¸æ“šï¼Œæ‰‹å‹•æ–°å¢ä¸€ç­†æ´¾èª²æ¸¬è©¦

---

### å•é¡Œ 2ï¼šéæ¿¾çµæœæ˜¯ 0ï¼ˆä½†æœ‰æ•¸æ“šï¼‰

**åŸå› **ï¼šå¸«è³‡IDä¸åŒ¹é…æˆ–æ—¥æœŸè¶…å‡ºç¯„åœ

**è§£æ±ºæ–¹æ³•**ï¼š

æŸ¥çœ‹ Console ä¸­çš„ä¸åŒ¹é…åŸå› ï¼š
```
âœ— èª²ç¨‹ æ•¸å­¸èª² - å¸«è³‡ä¸åŒ¹é… (102 !== 101)
```

æª¢æŸ¥ï¼š
1. æ´¾èª²çš„ teacherId æ˜¯å¦æ­£ç¢º
2. æ—¥æœŸç¯„åœæ˜¯å¦åŒ…å«æ´¾èª²æ—¥æœŸ

æ‰‹å‹•æª¢æŸ¥æ•¸æ“šï¼š
```javascript
// æŸ¥çœ‹æ‰€æœ‰æ´¾èª²
console.log(courseAssignments);

// æŸ¥çœ‹ç‰¹å®šå¸«è³‡çš„èª²ç¨‹
console.log(courseAssignments.filter(c => c.teacherId == 101));

// æŸ¥çœ‹æ—¥æœŸç¯„åœå…§çš„èª²ç¨‹
console.log(courseAssignments.filter(c => c.date >= '2025-11-01' && c.date <= '2025-11-30'));
```

---

### å•é¡Œ 3ï¼šæ”¹è®Šæ—¥æœŸå¾Œçµ±è¨ˆæ²’æ›´æ–°

**åŸå› **ï¼šupdateCourseView() æ²’æœ‰è¢«èª¿ç”¨

**è§£æ±ºæ–¹æ³•**ï¼š

æ‰‹å‹•è§¸ç™¼æ›´æ–°ï¼š
```javascript
updateCourseView()
```

æª¢æŸ¥æ—¥æœŸé¸æ“‡å™¨æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š
```javascript
console.log('é–‹å§‹æ—¥æœŸ:', document.getElementById('courseStartDate').value);
console.log('çµæŸæ—¥æœŸ:', document.getElementById('courseEndDate').value);
```

---

### å•é¡Œ 4ï¼šlocalStorage æœ‰æ•¸æ“šä½†é é¢è®Šæ•¸æ˜¯ç©ºçš„

**åŸå› **ï¼šæ•¸æ“šæ²’æœ‰æ­£ç¢ºåŒæ­¥åˆ° courseAssignments è®Šæ•¸

**è§£æ±ºæ–¹æ³•**ï¼š

æ‰‹å‹•åŒæ­¥ï¼š
```javascript
courseAssignments = JSON.parse(localStorage.getItem('courseAssignments'));
console.log('å·²åŒæ­¥ï¼Œå…±', courseAssignments.length, 'ç­†');
updateCourseView();
```

---

## ğŸ“Š å®Œæ•´æ¸¬è©¦è…³æœ¬

åœ¨ Console ä¸­ä¾åºåŸ·è¡Œä»¥ä¸‹å‘½ä»¤é€²è¡Œå®Œæ•´æ¸¬è©¦ï¼š

```javascript
// 1. è¨ºæ–·ç•¶å‰ç‹€æ…‹
diagnoseCourseManagement();

// 2. æª¢æŸ¥ localStorage
console.log('localStorage æ´¾èª²æ•¸æ“š:',
  JSON.parse(localStorage.getItem('courseAssignments')));

// 3. é‡æ–°è¼‰å…¥æ•¸æ“š
await loadCourseAssignmentsFromBackend();

// 4. å†æ¬¡è¨ºæ–·
diagnoseCourseManagement();

// 5. å¦‚æœæœ‰æ•¸æ“šï¼Œæ‰‹å‹•é¸æ“‡å¸«è³‡ä¸¦æ›´æ–°
// ï¼ˆå‡è¨­å¸«è³‡IDæ˜¯ 101ï¼‰
currentCourseTeacherId = 101;
document.getElementById('courseTeacherSelect').value = '101';
updateCourseView();
```

---

## ğŸ“¸ è«‹æä¾›ä»¥ä¸‹æˆªåœ–

å¦‚æœå•é¡Œé‚„æ˜¯å­˜åœ¨ï¼Œè«‹æˆªåœ–ä»¥ä¸‹å…§å®¹çµ¦æˆ‘ï¼š

### 1. è¨ºæ–·å ±å‘Š
åŸ·è¡Œ `diagnoseCourseManagement()` çš„å®Œæ•´è¼¸å‡º

### 2. é é¢è¼‰å…¥æ—¥èªŒ
é‡æ–°æ•´ç†é é¢å¾Œçš„ Console è¼¸å‡ºï¼ˆå¾é ­é–‹å§‹ï¼‰

### 3. é¸æ“‡å¸«è³‡å¾Œçš„æ—¥èªŒ
é¸æ“‡å¸«è³‡å¾Œçš„å®Œæ•´ Console è¼¸å‡º

### 4. æ•¸æ“šæ¨£æœ¬
```javascript
console.log('æ´¾èª²æ•¸æ“šæ¨£æœ¬:', courseAssignments.slice(0, 3));
```

### 5. ç•¶å‰ç‹€æ…‹
```javascript
console.log({
  teacherId: currentCourseTeacherId,
  startDate: currentCourseStartDate,
  endDate: currentCourseEndDate,
  totalCourses: courseAssignments.length
});
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

æ ¹æ“šè¨ºæ–·çµæœï¼Œæˆ‘æœƒé€²ä¸€æ­¥ä¿®å¾©å•é¡Œã€‚ç¾åœ¨æœ€é‡è¦çš„æ˜¯æ‰¾å‡ºï¼š

1. âœ… æ•¸æ“šæ˜¯å¦æ­£ç¢ºè¼‰å…¥ï¼Ÿ
2. âœ… éæ¿¾é‚è¼¯æ˜¯å¦æ­£å¸¸ï¼Ÿ
3. âœ… è¦–åœ–æ›´æ–°æ˜¯å¦è¢«è§¸ç™¼ï¼Ÿ

**è«‹é‹è¡Œè¨ºæ–·å·¥å…·ä¸¦æŠŠçµæœå‘Šè¨´æˆ‘ï¼** ğŸ”
